/**
 * cbpShop.min.js v1.0.0
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2013, Codrops
 * http://www.codrops.com
 */
(function(b){function a(c){this.el=c;this._init()}a.prototype={_init:function(){var c=this;this.touch=Modernizr.touch;this.products=this.el.querySelectorAll("ul.cbp-pggrid > li");Array.prototype.slice.call(this.products).forEach(function(j,h){var l=j.querySelector("div.cbp-pgcontent"),k=l.querySelector("div.cbp-pgitem"),f=l.querySelector("span.cbp-pgrotate");if(c.touch){f.addEventListener("touchstart",function(){c._rotateItem(this,k)});var e=l.querySelector("ul.cbp-pgoptions"),g=e.querySelector("li.cbp-pgoptsize > span"),d=e.querySelector("li.cbp-pgoptcolor > span");g.addEventListener("touchstart",function(){c._showItemOptions(this)});d.addEventListener("touchstart",function(){c._showItemOptions(this)})}else{f.addEventListener("click",function(){c._rotateItem(this,k)})}})},_rotateItem:function(c,d){if(d.getAttribute("data-open")==="open"){d.setAttribute("data-open","");c.className=c.className.replace(/\b cbp-pgrotate-active\b/,"");d.className=d.className.replace(/\b cbp-pgitem-showback\b/,"")}else{d.setAttribute("data-open","open");c.className+=" cbp-pgrotate-active";d.className+=" cbp-pgitem-showback"}},_showItemOptions:function(c){if(c.getAttribute("data-open")==="open"){c.setAttribute("data-open","");c.parentNode.className=c.parentNode.className.replace(/\b cbp-pgoption-active\b/,"")}else{c.setAttribute("data-open","open");c.parentNode.className+=" cbp-pgoption-active"}},};b.cbpShop=a})(window);